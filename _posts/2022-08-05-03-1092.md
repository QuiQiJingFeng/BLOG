---
layout: post
title:  "性能优化之音频优化"
image: ''
date:   2022-08-05 16:53:15
tags:
- Unity
description: ''
categories: 
- Unity
---
[参考文档1](https://segmentfault.com/a/1190000019844821)  
[官方文档](https://docs.unity3d.com/ScriptReference/AudioClip.html)  

# 音频剪辑加载类型 (AudioClipLoadType)
1. Streaming 直接从磁盘流读取音频数据，有一定的内存消耗

    加载类型|解压方式|适用范围
    :-|:-|:-
    DecompressOnLoad|解压后的音频数据存到内存当中|在场景启动的时候就进行解压缩,适用于一些比较频繁播放的比较小的音效
    CompressedInMemory|压缩的形式读入内存当中,播放的时候动态解码|适用于一些不频繁播放的稍大一些的语音
    Streaming|从磁盘中流式传输音频数据|流式传输直接把数据传输给音频的播放进程,适用于一些不频繁播放和停止的背景音乐

PS: 流式传输一定要避免频繁的播放停止,因为进程间共享内存是有大小的(android上是这样的),频繁播放停止会使得内存溢出从而导致声音无法播出来。  

1. 较小的文件(几十KB)：  
    Force To Mono  `单声道`  
    Load Type `DecompressOnLoad`
    Preload Audio Data  `加载剪辑资源时预加载剪辑的音频数据`  
    Compression Format `PCM`  无压缩  
    Sample Rate Setting `Optimize SAample Rate`   采样方式
2. 中等的文件(几百KB)： 
    Force To Mono  `单声道`  
    Load Type `CompressedInMemory`
    Preload Audio Data  `加载剪辑资源时预加载剪辑的音频数据`  
    Compression Format `ADPCM` 这种格式比Vorbis/Mp3的压缩率低,Cpu消耗也低,相对来说比较适合语音的播放  
    Sample Rate Setting `Optimize SAample Rate`   采样方式  
3. 较大的文件(几MB)  
    Force To Mono  `单声道`  
    Load in Background `后台加载`
    Load Type `Streaming`  
    Compression Format `Vorbis`  压缩率比Mp3还要高一点,并且是开源的格式,适合于背景音乐的播放
    Quality `100`  质量
    Sample Rate Setting `Optimize SAample Rate`   采样方式  